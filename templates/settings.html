{% extends 'base.html' %}

{% block title %}Settings - Reconciliation Manager{% endblock %}

{% block content %}
<div class="page-header">
    <h1><i class="bi bi-gear"></i> Settings</h1>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card form-card mb-4">
            <div class="card-header bg-white">
                <h5 class="mb-0"><i class="bi bi-database"></i> Data Storage Location</h5>
            </div>
            <div class="card-body">
                <div class="alert alert-info mb-3">
                    <i class="bi bi-info-circle"></i> All your data is stored locally in an SQLite database file.
                </div>
                
                <p><strong>Database File Location:</strong></p>
                <div class="bg-light p-3 rounded mb-3">
                    <code style="word-break: break-all;">{{ db_path }}</code>
                </div>
                
                <p class="text-muted small">
                    <i class="bi bi-lightbulb"></i> <strong>Tip:</strong> To backup your data, simply copy this file to a safe location. 
                    To restore, replace the file and restart the application.
                </p>
            </div>
        </div>
        
        <div class="card form-card mb-4">
            <div class="card-header bg-white">
                <h5 class="mb-0"><i class="bi bi-person-badge"></i> Your Account</h5>
            </div>
            <div class="card-body">
                <table class="table table-borderless mb-0">
                    <tr>
                        <td width="150"><strong>Name:</strong></td>
                        <td>{{ current_user.name }}</td>
                    </tr>
                    <tr>
                        <td><strong>Username:</strong></td>
                        <td>{{ current_user.username }}</td>
                    </tr>
                    <tr>
                        <td><strong>Role:</strong></td>
                        <td>
                            <span class="badge {% if current_user.is_admin() %}role-badge-admin{% else %}role-badge-user{% endif %}">
                                {{ current_user.role | upper }}
                            </span>
                            {% if current_user.is_admin() %}
                            <small class="text-muted ms-2">(Full access)</small>
                            {% else %}
                            <small class="text-muted ms-2">(View & Complete only)</small>
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Member Since:</strong></td>
                        <td>{{ current_user.created_at.strftime('%Y-%m-%d') }}</td>
                    </tr>
                </table>
                
                <hr>
                
                <a href="{{ url_for('change_password') }}" class="btn btn-outline-primary">
                    <i class="bi bi-key"></i> Change Password
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card form-card">
            <div class="card-header bg-white">
                <h5 class="mb-0"><i class="bi bi-shield-check"></i> Role Permissions</h5>
            </div>
            <div class="card-body">
                <h6 class="text-danger"><i class="bi bi-shield-fill"></i> Admin</h6>
                <ul class="small mb-3">
                    <li>Add/Edit/Delete reconciliations</li>
                    <li>Add/Edit/Delete team members</li>
                    <li>Manage user accounts</li>
                    <li>Reset recs for next cycle</li>
                    <li>All User permissions</li>
                </ul>
                
                <h6 class="text-secondary"><i class="bi bi-person-fill"></i> User</h6>
                <ul class="small mb-0">
                    <li>View all reconciliations</li>
                    <li>Start working on recs</li>
                    <li>Mark recs as complete</li>
                    <li>View team members</li>
                </ul>
            </div>
        </div>
        
        <div class="card form-card mt-4">
            <div class="card-header bg-white">
                <h5 class="mb-0"><i class="bi bi-info-circle"></i> About</h5>
            </div>
            <div class="card-body">
                <p class="mb-2"><strong>ReconcileHub</strong></p>
                <p class="small text-muted mb-0">
                    Reconciliation Work Allocation System<br>
                    Manage Daily, Weekly, and Monthly reconciliations for your team.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
